# ==========================================
# CONFIGURACIÓN GENERAL
# ==========================================
directorio_imagenes: dataset_split_1

# Gestor de modelos (backend)
gestor: ollama

# ==========================================
# CONFIGURACIÓN DE MODELOS (BACKENDS)
# ==========================================
ollama_config:
  endpoint: http://localhost:11434/api/generate

lm_studio_config:
  endpoint: http://host.docker.internal:1234/v1/chat/completions

vllm_config:
  endpoint: http://host.docker.internal:8000/v1/chat/completions

qwen_config:
  endpoint: http://host.docker.internal:8001/qwen3/chat/completions

openai_config:
  api_key: sk-...

gemini_config:
  api_key: XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# Modelo VLM a evaluar
modelo_a_evaluar: qwen3-vl:4b

modelos_a_evaluar_en_lote:
  - qwen3-vl:4b

# Hiperparámetros de generación VLM
hiperparametros:
  temperature: 0.0
  top_k: 30

# ==========================================
# ARCHIVOS DE SALIDA Y TAREAS
# ==========================================
prompts_file: prompts.json
output_file: resultados_evaluacion.json

tareas_a_ejecutar:
  - Hallucination
  # - hF1
  # - PDS

# ==========================================
# ✨ CONFIGURACIÓN SAM3 (NUEVO)
# ==========================================
# Necesario para el módulo de segmentación previo al RAG
sam3_config:
  # Ruta al vocabulario (ajusta si tu carpeta assets está en otro lado)
  bpe_path: "./assets/bpe_simple_vocab_16e6.txt.gz"
  text_prompt: "car"

# ==========================================
# ✨ CONFIGURACIÓN RAG MULTIMODAL (GRID)
# ==========================================
rag_config:
  enabled: true
  
  # Tipo de motor de embeddings
  embedding_model_type: "metaclip"  # Usa el nuevo MetaCLIPEmbedder
  
  # Rutas al Índice Vectorial (Generado en Fase 4)
  # Asegúrate de que coincidan con donde guardaste el índice unificado
  index_path: "outputs/vector_indices/metaclip_unified_index"
  index_filename: "index_metaclip_unified.faiss"
  metadata_filename: "metadata_unified.pkl"
  config_filename: "index_config.json"
  
  # Parámetros de Inferencia por Grid (Inference Pipeline)
  top_k_per_crop: 3         # Cuántos vecinos buscar por cada crop del grid
  similarity_threshold: 0.60 # Umbral mínimo de similitud para considerar un hallazgo válido
  
  # Normalización de taxonomía (para limpiar nombres de daños)
  enable_taxonomy_normalization: true
  
  # Configuración Legacy (Ignorada por MetaCLIP pero mantenida por compatibilidad)
  visual_weight: 0.5
  text_weight: 0.5